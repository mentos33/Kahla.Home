@model Kahla.Home.Models.HomeViewModels.IndexViewModel
@{
    ViewBag.Des = Localizer["As a cross-platform business messaging app, Kahla can encrypt communications at any location, on any device. And it is completely open source and free."].Value;
    var requestCultureFeature = Context.Features.Get<IRequestCultureFeature>();
    if (requestCultureFeature == null)
    {
        return;
    }
    var requestCulture = requestCultureFeature.RequestCulture.UICulture.IetfLanguageTag;
    var isChineseUser = requestCulture.ToLower().Trim() == "zh";
}
<header>
    <div class="container-new py-6 px-3 text-center">
        <a href="/">
            <img src="https://oss.aiursoft.com/MyPersonalFiles/512x512.png" alt="Kahla Desktop" width="96" height="96">
        </a>
        <ul class="nav list-style-none d-flex flex-justify-center f4">
            <li>
                <a class="d-inline-block m-2 current" href="@ServiceLocation.WWW">@Localizer["Aiursoft"]</a>
            </li>
            <li>
                <a class="d-inline-block m-2 current" href="https://wiki.aiursoft.com/ReadDoc/Kahla/What%20is%20Kahla.md">@Localizer["About Kahla"]</a>
            </li>
            <li>
                <a class="d-inline-block m-2" href="https://github.com/AiursoftWeb/Kahla.App/releases">@Localizer["Release notes"]</a>
            </li>
            <li>
                <a class="d-inline-block m-2" href="#">@Localizer["Help and community"]</a>
            </li>
            <li>
                <a class="d-inline-block m-2" href="@(new AiurUrl(ServiceLocation.API, "Api", "SetLang", new { Host = $"{Context.Request.Scheme}://{Context.Request.Host}", Path = Context.Request.Path }))">
                    @Localizer["Language"]
                </a>
            </li>
        </ul>
    </div>
</header>
<div class="hero pt-6 text-center">
    <div class="container-new px-3">
        <h1 class="f00-light text-white">
            @Localizer["Kahla - Connect everyone's thoughts"]
        </h1>
        <p class="col-md-8 mx-auto mb-4 f3-light">
            @ViewBag.Des
        </p>
        <p>
            @Localizer["Latest version:"] <kbd data-href="@Configuration["GitHubAddress"]">@Model.LatestVersion</kbd>
        </p>
        @if (!isChineseUser)
        {
            <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="#" data-toggle="modal" data-target="#downloadModal">@Localizer["Download"]</a>
            <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="#" data-toggle="modal" data-target="#openModal">@Localizer["Open in browser"]</a>
            <p>
                @Localizer["By downloading, you agree to the"]
                <a href="@(Values.Footer["Terms"])">@Localizer["license agreement"]</a>@Localizer["."]
            </p>
        }
        else
        {
            <p class="text-danger">很抱歉，卡拉不为中国大陆用户提供服务。<a href="http://www.cac.gov.cn/2019-04/16/c_1124373996.htm" target="_blank">为什么？</a></p>
        }
        <div class="d-block width-fit mx-auto mt-6 mb-6">
            <img style="width:100%;max-width:640px;" src="~/images/screen.min.png" class="app-screenshot" />
        </div>
    </div>
</div>
<div class="container-new px-3 text-center">
    <h2 class="f0-light mb-3 text-white">
        @Localizer["Ready to choose Kahla?"]
    </h2>
    <div class="d-md-flex flex-md-row col-xl-10 mx-auto text-white-75 f4 gut-lg">
        <div class="col-sm-10 mx-auto col-md-4 my-5 my-md-3">
            <span class="text-white">
                <i class="fa fa-3x fa-bank"></i>
            </span>
            <h2 class="f2-light my-2 text-white lh-condensed">
                @Localizer["Business level"]
            </h2>
            <p>
                @Localizer["Kahla is designed for commercial use. the service can be deployed inside your company and access to the full functionality of Kahla without internet."]
            </p>
        </div>
        <div class="col-sm-10 mx-auto col-md-4 my-5 my-md-3">
            <i class="fa fa-3x fa-television "></i>
            <h2 class="f2-light my-2 text-white lh-condensed">
                @Localizer["Cross-platform"]
            </h2>
            <p>
                @Localizer["Kahla faced almost all mobile and desktop platforms. Use only one app for quick access by any customer. Kahla also supports open in browser without installation."]
            </p>
        </div>
        <div class="col-sm-10 mx-auto col-md-4 my-5 my-md-3">
            <i class="fa fa-3x fa-lock"></i>
            <h2 class="f2-light my-2 text-white lh-condensed">
                @Localizer["Highly secure"]
            </h2>
            <p>
                @Localizer["Kahla supports end-to-end encrypted message communication and supports the automatic destruction of messages. Even if you don't trust Kahla's server, you can safely deliver secrets."]
            </p>
        </div>
    </div>
    <a class="btn btn-outline-white f4 mb-6" href="#" data-toggle="modal" data-target="#downloadModal">
        <i class="fa fa-fw fa-download"></i>
        @Localizer["Download now"]
    </a>
    <a class="btn btn-outline-white f4 mb-6 ml-3" href="@Configuration["GitHubAddress"]">
        <i class="fa fa-fw fa-github"></i>
        @Localizer["View on GitHub"]
    </a>
    <hr class="my-6 mx-auto" style="width: 100px;">
</div>
<div class="modal fade" id="openModal" tabindex="-1" role="dialog" aria-labelledby="openModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                <h4 class="text-dark mb-3 mt-3">
                    Version: @Model.LatestVersion
                </h4>
                <img src="/images/qrcode.png">
                <p>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="//web.kahla.app" target="_blank">@Localizer["Open now"]</a>
                </p>
            </div>
        </div>
    </div>
</div>
@{
    //var downloadRoot = "https://github.com/AiursoftWeb/Kahla.App/releases/download";
    var downloadRoot = "https://kahladownload.blob.core.windows.net/production";
    var archiveRoot = "https://github.com/AiursoftWeb/Kahla.App/archive";
    var version = Model.LatestVersion;
    var vversion = "v" + Model.LatestVersion;
}
<div class="modal fade" id="downloadModal" tabindex="-1" role="dialog" aria-labelledby="downloadModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body text-center" style="color:black">
                <p>
                    <h3>@Localizer["For Windows"]</h3>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@downloadRoot/KahlaWindows/Kahla.Setup.@(version).exe" target="_blank">@Localizer["Installer (exe)"]</a>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@downloadRoot/KahlaWindows/Kahla-@(version)-win.zip" target="_blank">@Localizer["Portable (zip)"]</a>
                    <hr />
                    <h3>@Localizer["For Mac OS"]</h3>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@downloadRoot/KahlaMacOS/Kahla-@(version).dmg" target="_blank">@Localizer["dmg"]</a>
                    <hr />
                    <h3>@Localizer["For Linux"]</h3>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@downloadRoot/KahlaLinux/kahla_@(version)_amd64.deb" target="_blank">@Localizer["Debian, Ubuntu (deb)"]</a>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@downloadRoot/KahlaLinux/kahla-@(version).x86_64.rpm" target="_blank">@Localizer["Redhat, Fedora (rpm)"]</a>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@downloadRoot/KahlaLinux/kahla-@(version).tar.gz" target="_blank">@Localizer["Others (tar.gz)"]</a>
                    <hr />
                    <h3>@Localizer["For Android and iOS"]</h3>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="//web.kahla.app" target="_blank">@Localizer["Web"]</a>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@downloadRoot/KahlaAndroid/Kahla-Android-@(version).apk" target="_blank">@Localizer["Android (apk)"]</a>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="//web.kahla.app" target="_blank"><label class="text-muted">@Localizer["(We are working on iOS app...)"]</label></a>
                    <hr />
                    <h3>@Localizer["For other platforms"]</h3>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="//web.kahla.app" target="_blank">@Localizer["Chrome OS, PWA"]</a>
                    <a class="mx-1 my-3 f3 btn btn-large btn-outline-purple" href="@archiveRoot/@vversion/@(version).zip" target="_blank">@Localizer["Source code"]</a>
                </p>
            </div>
        </div>
    </div>
</div>